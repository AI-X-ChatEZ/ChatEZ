<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ChatEz - 새벽배송보다 빠른 대화형 AI생성 서비스</title>
    <link rel="icon" href="img/favicon-32x32.png" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" th:href="@{css/bootstrap.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{css/style.css}" />
    <script src="js/bootstrap.min.js"></script>
  </head>
  <body>
    <!-- header-->
    <header>
      <div class="d-flex justify-content-between center">
        <h1>
          <a th:href="@{/}" sec:authorize="isAnonymous()">
            <img src="/img/ChatEZ_logo.svg" alt="ChatEz" /><span>ChatEZ</span>
          </a>
          <a th:href="@{/my-service}" sec:authorize="isAuthenticated()">
            <img src="/img/ChatEZ_logo.svg" alt="ChatEz" /><span>ChatEZ</span>
          </a>
        </h1>
<!--        <div class="btn login_btn" sec:authorize="isAnonymous()">-->
<!--          <a th:href="@{/login}" >로그인</a>-->
<!--        </div>-->
        <!-- Button trigger modal -->
        <button type="button" sec:authorize="isAnonymous()" class="custom_btn login_btn" data-bs-toggle="modal" data-bs-target="#loginModal">
          로그인
        </button>

        <!-- Modal -->
        <div class="modal fade" id="loginModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h2 class="modal-title fs-4" id="loginModalLabel">로그인</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <p class="text-center">
                ChatEZ로<br />
                빠르고 간편하게 서비스 맞춤 대화형 AI를 만들어보세요.
              </p>
              <div class="modal-body">
                <form th:action="@{/login}" method="post" class="center d-flex flex-column">
                  <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />

                    <div class="row mb-3">
                      <label for="email" class="blind">이메일</label>
                      <input type="email" name="email" id="email" class="form-control col" placeholder="이메일" />
                    </div>
                    <div class="row mb-4">
                      <label for="password" class="blind">비밀번호</label>
                      <input type="password" name="password" id="password" class="form-control col" placeholder="비밀번호">
                    </div>

                  <button type="submit" class="d-block submit_btn center">로그인</button>
                </form>
                <div class="join_link center d-flex justify-content-around">
                  <p class="d-inline-block">아직 회원이 아니신가요?</p>
                  <a href="/join" class="d-block custom_btn join_btn d-block text-center">회원가입</a>
                </div>
                <a href="/oauth2/authorization/google">구글로그인</a>
                <a href="/oauth2/authorization/kakao">카카오로그인</a>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Understood</button>
              </div>
            </div>
          </div>
        </div>

        <div class="btn login_btn" sec:authorize="isAuthenticated()">
          <a th:href="@{/logout}" >로그아웃</a>
        </div>
        </div>
    </header>
<!--    <header th:replace="~{header :: headerFragment}"></header>-->
    <!-- 각 페이지의 container내용-->
    <th:block layout:fragment="content"></th:block>
    <!-- footer -->
    <footer  th:replace="~{fragments/footer :: footerFragment}"></footer>
    <th:block layout:fragment="script"></th:block>
  </body>
</html>
